var roughwrappers;function decorate_tool_logo_svgs(){const e=document.querySelectorAll(".pfi__toollogo svg");for(logo of e)draw_multiple_svg_paths(logo,{fillStyle:"solid",fill:"#fff",stroke:"#333",roughness:"1.5",strokeWidth:"2",simplification:5})}function decorate_menuitem_hoverstates(){decorate_hoverstates_by_classname("menu-item",{fill:"#f5bcbd",fillStyle:"zigzag",hachureAngle:50,hachureGap:7,roughness:3.5})}async function decorate_hoverstates_by_classname(e,t){update_css_rule2(`${e="."===e.charAt(0)?e:"."+e}::before`,[{property:"min-width",value:"inherit"},{property:"padding",value:"inherit"},{property:"line-height",value:"inherit"},{property:"background-repeat",value:"no-repeat"},{property:"opacity",value:0},{property:"position",value:"absolute"},{property:"left",value:0},{property:"top",value:0},{property:"z-index",value:5},{property:"width",value:"100%"},{property:"height",value:"100%"},{property:"transition",value:".3s"},{property:"pointer-events",value:"none"}]),t=t||{fill:"#f5bcbd",fillStyle:"zigzag",hachureAngle:-50,hachureGap:7,roughness:3.5};const r=Array.from(document.querySelectorAll(e));for(let o=0;o<r.length;o++){let n=r[o].id;n&&"string"==typeof n||(r.id=n=e+"_"+o);try{update_css_rule2(`#${n}::before`,{property:"content",value:`'${r[o].textContent}'`}),update_css_rule2(`#${n}:hover::before`,{property:"opacity",value:"1"});let e=await draw_rectangular_canvas(r[o],t);await createBgimageCSS(e,`#${n}::before`)}catch(e){console.log(e)}}}function write_background_css_for_className(e=""){if(!e)return!1;write_default_states_css(Array.from(document.querySelectorAll(e)))}async function write_default_states_css(e=[]){getStyleNode();for(const t of e)try{const e=await get_rough_options(t),r=await draw_rectangular_canvas(t,e),o=t.id&&void 0!==t.id?"#"+t.id:create_nthchild_selector("."+t.classList[0]);await createBgimageCSS(r,o)}catch(e){console.log(e)}}function getStyleNode(){let e=document.getElementById("bgimagecss");return e||((e=document.createElement("style")).type="text/css",e.id="bgimagecss",document.head.append(e),e)}function get_rough_options(e){if(void 0!==e.dataset.options&&e.dataset.options)try{return options=string_to_object(e.dataset.options),options}catch(e){console.log(e)}let t="none";return e.classList.forEach(e=>{t=e.match(/preset[\w\-]+/)||t}),Array.isArray(t)&&(t=t.join()),get_rough_presets().get(t)}function get_rough_presets(e){if(void 0===get_rough_presets.presets&&(get_rough_presets.presets=new Map([["preset_outline_only",{roughness:4,bowing:2,strokeWidth:1.5,stroke:"#333"}],["preset_thinner_whitefill",{fillStyle:"solid",fill:"#222",roughness:4,bowing:2,strokeWidth:1.5,stroke:"#eee"}],["preset_darkbg_whitestroke",{fillStyle:"solid",fill:"#222",roughness:4,bowing:2,strokeWidth:1.5,stroke:"#eee"}],["preset_thin_outline",{roughness:2,bowing:.9,strokeWidth:.5,stroke:"#333"}],["preset_thick_lightblue",{fill:"lightblue",fillStyle:"zigzag",hachureAngle:60,hachureGap:4,roughness:3}],["preset_header_scratch",{fill:"rgba(141, 30, 227, 0.1)",fillStyle:"zigzag",fillWeight:2,hachureAngle:135,hachureGap:16,roughness:5,stroke:"none"}],["preset_menu-item",{fill:"lightgreen",fillStyle:"zigzag",hachureAngle:60,hachureGap:8,roughness:2.5}],["preset_textbutton",{fill:"lightblue",fillStyle:"cross-hatch",hachureAngle:40,hachureGap:3,roughness:2}],["preset_lightpurple_thincross",{fill:"rgba(190, 2, 238, 0.3)",fillStyle:"cross-hatch",hachureAngle:33,hachureGap:3,roughness:3}],["preset_portfolio_item",{fillStyle:"zigzag",stroke:"none",fillWeight:16,fill:"rgba(229, 188, 255, 0.4)",hachureGap:30,roughness:10,bowing:2}],["preset_page_heading",{fill:"red",fillStyle:"zigzag",hachureAngle:60,hachureGap:8,roughness:4}],["none",{fill:"none",fillStyle:"zigzag",hachureGap:8,roughness:5}]])),e){let[t,r]=e;get_rough_presets.presets.set(t,r)}return get_rough_presets.presets}function on_resize(){const e=on_resize;void 0!==e.w&&void 0!==e.h||(e.w=window.innerWidth,e.h=window.innerHeight);const t={w:window.innerWidth,h:window.innerHeight};let r=Math.abs(e.w-t.w)/e.w*100,o=Math.abs(e.h-t.h)/e.h*100;(r>5||o>30)&&(delete create_nthchild_selector.done,write_default_states_css(roughwrappers),frameImages()),document.documentElement.style.setProperty("--js_curr_viewport_h",`${.01*t.w}px`),e.w=t.w,e.h=t.h}async function decorate_logo_svgs(){try{await draw_svg_path(document.getElementById("header-logo__svg")),await draw_svg_path(document.getElementById("footer-logo__svg"))}catch(e){console.log(e)}}async function draw_rectangular_canvas(e,t){let r=await getElementDimensions(e),o=createVirtualCanvas(e,r.width,r.height);const n=rough.canvas(o);return await n.rectangle(.03*r.width,.03*r.height,.94*r.width,.94*r.height,t),o}async function draw_circular_background(e,t){let r=await getElementDimensions(e),o=createVirtualCanvas(e,r.width,r.height),n=.5*r.width;const i=rough.canvas(o);await i.circle(n,n,.9*r.width,t),await setCanvasToBGimg(e,o)}async function draw_svg_path(e,t){const r=e.querySelector("svg")||e;t=t||{roughness:.5,strokeWidth:.25,simplification:.9,fill:"grey"};const o=rough.svg(r,{async:!0}),n=r.querySelectorAll("path");for(const e of n){e.style.fill="none";let n=await o.path(e.getAttribute("d"),t);e.remove(),r.append(n)}}async function draw_multiple_svg_paths(e,t){const r=rough.svg(e,{async:!0});for(p of(t=t||{roughness:.5,strokeWidth:.25,simplification:.9,fill:"grey"},svgpaths=e.querySelectorAll("path"),svgpaths)){p.style.fill="none";let o=await r.path(p.getAttribute("d"),t);p.remove(),e.append(o)}}function blobToUrl(e){return URL.createObjectURL(e)}async function setCanvasToBGimg(e,t){try{await t.toBlob(t=>{if(!t)throw"failed to create a blob for element with id "+e.id;{let r=blobToUrl(t);e.style.backgroundImage="url("+r+")"}},"image/png",.9)}catch(e){console.log(e)}}async function setHoverStateBGImage(e,t){const r=e.style.backgroundImage;try{await t.toBlob(t=>{if(!t)throw"failed to create a blob for element with id "+e.id;e.style.transition="0.3s",e.addEventListener("mouseenter",()=>e.style.backgroundImage=`url(${blobToUrl(t)})`),e.addEventListener("mouseleave",()=>e.style.backgroundImage=r)},"image/png",.9)}catch(e){console.log(e)}}function create_nthchild_selector(e){const t=create_nthchild_selector;void 0===t.done&&(t.done=[]);for(let r=0;r<t.done.length;r++){let o=t.done[r];if(o.selector==e)return o.counter+=1,`${o.selector}:nth-child(${o.counter})`}let r={selector:e,counter:1};return t.done.push(r),`${r.selector}:nth-child(${r.counter})`}function createBgimageCSS(e,t){e.toBlob(async e=>{if(e){const r=await blobToUrl(e);update_css_rule2(t,{property:"background-image",value:`url(${r})`})}},"image/png",.9)}function update_css_rule2(e="",t=null){const r=getStyleNode(),o=update_css_rule2;if(void 0===o.rules&&(o.rules=new Array),!e)return;let n;if(!t&&(n=searchRulesForSelector(o.rules,e))){let t="";return o.rules[n].style.forEach(e=>{t+=`${e.property}:${e.value};`}),console.log(`existing declaration: ${e}{${t}}`),`${e}{${t}}`}let i=[];if(Array.isArray(t)?i=t:i.push(t),(n=searchRulesForSelector(o.rules,e))||o.rules.push({selector:e,style:i}),n)for(const e of i){let t=!1;for(const r of o.rules[n].style)e.property==r.property&&(r.value=e.value,t=!0);t||o.rules[n].style.push({property:e.property,value:e.value})}r.textContent="";for(let e of o.rules){let t="";e.style.forEach(e=>{t+=`${e.property}:${e.value};`}),r.textContent+=`\n${e.selector}{${t}}\n`}}function searchRulesForSelector(e,t){for(let r=0;r<e.length;r++)if(e[r].selector===t)return r;return!1}function findBySelector(e,t){for(var r=0;r<e.length;r++)if(e[r].selector===t)return e[r];return!1}function getElementDimensions(e){let t,r;if("none"!=window.getComputedStyle(e).display)return{width:t=e.scrollWidth,height:r=e.scrollHeight};let o=window.getComputedStyle(e).width,n=window.getComputedStyle(e).height,i=parseInt(o,10)/100,a=parseInt(n,10)/100;function s(e){let t=e.parentNode,r=0;for(;"none"==window.getComputedStyle(t).display&&r<=500;)t=t.parentNode,r++;return t}switch(!0){case o.match("px"):t=parseInt(o);break;case o.match("vw"):t=i*window.innerWidth;break;case o.match("%"):nearestVisibleParent=s(e),t=i*nearestVisibleParent.scrollWidth}switch(!0){case n.match("px"):t=parseInt(n);break;case n.match("vh"):t=a*window.innerHeight;break;case n.match("%"):nearestVisibleParent=s(e),t=a*nearestVisibleParent.scrollHeight}return{width:t,height:r}}function createVirtualCanvas(e,t=0,r=0){if(0==t||0==r){let o=getElementDimensions(e);t=o.width,r=o.height}let o=document.createElement("canvas");return o.setAttribute("width",t),o.setAttribute("height",r),o}function isObjectEmpty(e){return"object"!=typeof e?typeof e:0===Object.keys(e).length&&e.constructor===Object}function string_to_object(e){if("string"!=typeof e)return;e=e.replace(/([\w\-\.]+)\s?:\s?([\w\-\.]+)/g,'"$1":"$2"').replace(/\"(\d+[\.]?\d*)\"/g,"$1"),/[{}]/.test(e)||(e="{"+e+"}");let t=JSON.parse(e);if("object"!=typeof t)throw`failed to convert string:\n' ${e} '\nallowed characters: - _ . `;return t}function debounce(e,t,r){var o;return function(){var n=this,i=arguments,a=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||e.apply(n,i)},t),a&&e.apply(n,i)}}function decode_rot13(e){return e.replace(/[a-zA-Z]/g,e=>String.fromCharCode((e<="Z"?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26))}function frameImages(){const e=Array.from(document.querySelectorAll(".framed-image"));for(let t of e)if(t.classList.contains("dark-on-light")){new imageFrame(t,"#222")}else{new imageFrame(t)}}document.addEventListener("DOMContentLoaded",e=>{roughwrappers=Array.from(document.querySelectorAll(".rough_wrapper, .__textbutton")),decorate_logo_svgs(),write_default_states_css(roughwrappers),decorate_tool_logo_svgs()}),window.addEventListener("load",e=>{decorate_menuitem_hoverstates(),decorate_hoverstates_by_classname("__textbutton"),frameImages()}),window.addEventListener("orientationchange",()=>on_resize()),window.addEventListener("resize",debounce(on_resize,50));class imageFrame{constructor(e,t){this.color=t||"#eee",this.pic=e,this.frame=this.makeFrame(),this.framePic(),this.picDims=this.getPicdims(e)}makeFrame(){const e=this.pic,t=document.createElement("canvas");t.classList.add("framed-image__frame");const r=this.getPicdims(e);t.width=r.w,t.height=r.h;const o=Math.max(2,.005*r.w),n=Math.min(32,.04*r.w);console.log(n,o);let i=r.w-o,a=r.h-o,s=`m${o} ${o} H ${i} V ${a} H ${o}z m${o+n} ${o+n} H ${i-n} V ${a-n} H ${o+n}z`;const l=rough.canvas(t);return l.path(s,{fill:"none",fillStyle:"solid",stroke:"none",bowing:2}),l.path(s,{fill:this.color,fillStyle:"zigzag",fillWeight:2,hachureGap:10,stroke:this.color,bowing:2,roughness:2,disableMultiStrokeFill:!0}),t}framePic(){this.getPicdims(this.pic);var e;this.pic.parentElement.classList.contains("framed-image__hook")?((e=this.pic.parentElement.parentElement).appendChild(this.pic),e.querySelector(".framed-image__hook").remove()):e=this.pic.parentElement;const t=document.createElement("div");t.classList.add("framed-image__hook"),e.appendChild(t),t.appendChild(this.pic),t.appendChild(this.frame),function(e){const t=e.querySelector("figcaption");if(!t)return;!t.id&&e.id&&(t.id=e.id+"_caption");if(!t.id){const r=e.querySelector("img");console.log(r),r&&(t.id=r.classList[0]+NaN)}if(!t.id){let r=e.parentElement;for(;!t.id;){if(r.id){t.id=r.id+"_caption";break}r=r.parentElement}}draw_rectangular_canvas(t,{fillStyle:"solid",fill:"#222",roughness:2,bowing:2,strokeWidth:1.5,stroke:"#eee"}).then(e=>setCanvasToBGimg(t,e))}(this.pic)}getPicdims(e){return{w:e.scrollWidth||e.width,h:e.scrollHeight||e.height}}}